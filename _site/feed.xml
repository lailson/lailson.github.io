<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">



  
  

<title type="text">Lailson Henrique</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://localhost:4000/feed.xml" />
<link rel="alternate" type="text/html" href="http://localhost:4000/" />
<updated>2014-06-16T12:15:56-03:00</updated>
<id>http://localhost:4000/</id>
<author>
  <name>Lailson Henrique</name>
  <uri>http://localhost:4000/</uri>
  <email>lailson.pi@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Análise de Malware - PARTE1]]></title>
  <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Analise-de-Malware-Parte1/"/>
  <id>http://localhost:4000/articles/Analise-de-Malware-Parte1</id>
  <updated>2014-06-14T00:00:00-00:00</updated>
  <published>2014-06-14T00:00:00-03:00</published>
  
  <author>
    <name>Lailson Henrique</name>
    <uri>http://localhost:4000</uri>
    <email>lailson.pi@gmail.com</email>
  </author>
  <category scheme="http://localhost:4000/tags/#malware%20analise%20estatica%20dinamica%20linux%20wireshark%20botnet%20rxbot" term="malware analise estatica dinamica linux wireshark botnet rxbot" />
  <content type="html">
  
    &lt;p&gt;Este post mostra uma introdução à Análise de Malware mostrando passo-a-passo como devemos analisar de forma estática e dinâmica um malware. 
A análise &lt;/p&gt;

&lt;h1 id=&quot;analisando-malware&quot;&gt;Analisando Malware&lt;/h1&gt;

&lt;h2 id=&quot;anlise-na-web&quot;&gt;Análise na web&lt;/h2&gt;
&lt;p&gt;Inicialmente vamos submentar o nosso artefato a um site para ser avalisado por diersos antivirus. O site é &lt;a href=&quot;http://virustotal.com&quot;&gt;www.virustotal.com&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/virustotal.png&quot; /&gt;
 &lt;/figure&gt;

&lt;p&gt;Nesse caso o malware submetido pof analisado por 54 antivirus no qual 40 deles detectaram que este realmente é um malware.&lt;/p&gt;

&lt;h2 id=&quot;ambiente-virtual&quot;&gt;Ambiente Virtual&lt;/h2&gt;
&lt;p&gt;Nessa prática vamos utilizar o &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;Virtual Box&lt;/a&gt; que é uma ferramentar para virtualizar ambientes, assim podemos simular (virtualizar) uma máquina windows xp e uma máquina linux (REMnux). 
Como vamos manipular um malware devemos tomar certos cuidados, para isso vamos criar uma rede host-only para que haja conexão apenas entre a máquina windows XP e Linux. 
Para faciliar segue o &lt;a href=&quot;https://mega.co.nz/#!rsJx0LRK!a6whtxW014bzH2kDyv03an1hyhqvkwVXyOqBV84pJ5o&quot;&gt;link da máquina xp&lt;/a&gt; no formato .ova e do &lt;a href=&quot;http://sourceforge.net/projects/remnux/files/version5/remnux-5.0-live-cd.iso/download&quot;&gt; linux no formato iso e &lt;a href=&quot;http://sourceforge.net/projects/remnux/files/version5/remnux-5.0-ova-public.ova/download&quot;&gt;no formato ova&lt;/a&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/Virtualbox.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h2 id=&quot;anlise-esttica---cdigo&quot;&gt;Análise Estática - Código&lt;/h2&gt;
&lt;p&gt;Vamos analisar o código utilizando um programa bintext &lt;a href=&quot;http://b2b-download.mcafee.com/products/tools/foundstone/bintext303.zip&quot;&gt;link&lt;/a&gt; que é possível “ler” um código mesmo depois que o arquivo é compilado.&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/bintext.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Como mostra a figura a cima o código está ofuscado. Essa é uma técnica usada pelos malwares para tentar esconder seu código, para isso é utilizado programas conhecidos como packer. Pare tentar desofuscar o código iremos utilizao o UPX &lt;a href=&quot;http://sourceforge.net/projects/upx/&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/upx.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Figura: upx &lt;/p&gt;

&lt;h2 id=&quot;anlise-dinmica---comportamental&quot;&gt;Análise Dinâmica - Comportamental&lt;/h2&gt;
&lt;p&gt;Utilizaremos o wireshark para verificar os pacotes que trafegam na rede. O wireshark é um snifer (bisbilhoteiro) que capture o tráfego da rede para análise.
Neste caso usaremos a versão do Remnux que ja vem com o wireshark instalado, mas primiero devemos criar uma rede host-only.
Para execute o wireshark pelo remnux utiliza-se o comando &lt;code&gt;sudo wireshark&lt;/code&gt; e a senha do root é &lt;code&gt;malware&lt;/code&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/wireshark.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h3 id=&quot;hosts&quot;&gt;Hosts&lt;/h3&gt;
&lt;p&gt;Na nossa experiência percebemos através do wireshark que nosso malware tenta se conectar com o servidor lailsonhenrique.com então vamos alterar o arquivo hosts para que o windowsxp pense que nossa máquina linux é o servidor lailsonhenrique.com
&lt;code&gt;C:\windows\system32\drivers\etc\hosts&lt;/code&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/hosts.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Figura: Aterando arquivo Hosts&lt;/p&gt;

&lt;h2 id=&quot;irc&quot;&gt;IRC&lt;/h2&gt;
&lt;p&gt;O malware tenta se conectar a um servidor irc, sendo assim vamos utilizar o Remnux para estartar um servidor irc utilizando o comando &lt;code&gt;ircd start&lt;/code&gt; depois vamos entrar no canal &lt;code&gt;#malware&lt;/code&gt; e vamos perceber que o virus estar conectado a este canal, então vamos digitar alguns comandos para interagir com o malware
É necessário se autenticar para se comunicar com o malware para isso vamos digitar &lt;code&gt;.login aula&lt;/code&gt; onde aula é a senha.&lt;/p&gt;

&lt;h1 id=&quot;vdeo&quot;&gt;Vídeo&lt;/h1&gt;
&lt;p&gt;Veja todo o processo no vídeo a baixo&lt;/p&gt;

&lt;p&gt;link: https://www.youtube.com/watch?v=8MEjb4N5kTM&lt;/p&gt;

&lt;iframe width=&quot;420&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/watch?v=yDRk0-wdVD0&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/watch?v=yDRk0-wdVD0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;


  
  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Analise-de-Malware-Parte1/&quot;&gt;Análise de Malware - PARTE1&lt;/a&gt; was originally published by Lailson Henrique at &lt;a href=&quot;http://localhost:4000&quot;&gt;Lailson Henrique&lt;/a&gt; on June 14, 2014.&lt;/p&gt;</content>
</entry>

</feed>
