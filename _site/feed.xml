<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">



  

<title type="text">Lailson Henrique</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://lailson.github.io/feed.xml" />
<link rel="alternate" type="text/html" href="http://lailson.github.io/" />
<updated>2014-09-15T14:46:21-03:00</updated>
<id>http://lailson.github.io/</id>
<author>
  <name>Lailson Henrique</name>
  <uri>http://lailson.github.io/</uri>
  <email>lailson.pi@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Segurança em servidores Linux - Parte 2]]></title>
  <link rel="alternate" type="text/html" href="http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte2/"/>
  <id>http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte2</id>
  <updated>2014-09-14T00:00:00-00:00</updated>
  <published>2014-09-13T00:00:00-03:00</published>
  
  <author>
    <name>Lailson Henrique</name>
    <uri>http://lailson.github.io</uri>
    <email>lailson.pi@gmail.com</email>
  </author>
  <category scheme="http://lailson.github.io/tags/#seguran%C3%A7a%20linux%20antivirus%20boot%20grub%20log%20kaspersky%20clamav%20mysql%20pati%C3%A7%C3%B5es" term="segurança linux antivirus boot grub log kaspersky clamav mysql patições" />
  <content type="html">
  
    &lt;h1 id=&quot;limitando-recursos&quot;&gt;Limitando recursos&lt;/h1&gt;
&lt;p&gt;No sistema operacional Linux é possível limitar a utilização de recursos como memória, processador e logins
Estes recursos são controlados pelo Kernel e configurados no arquivo limits.conf para todos os serviços que utilizam PAM&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;find /etc/pam.d/ \! -name &amp;quot;*.dpkg*&amp;quot; | xargs -- grep limits |grep -v &amp;quot;:#&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A primeira ação é derrubar o sistema com um comando simples chamado &lt;em&gt;fork bomb&lt;/em&gt;. Como usuário comum, entre no Linux e digite o código abaixo:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;:(){ :|:&amp;amp; };&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Com esse comando o sistema vai parar então caso tenha executado o comando reinicie a máquina.&lt;br /&gt;
Vamos verificar quais os limites do usuário: &lt;code&gt;ulimit -a&lt;/code&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/ulimit-a.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Para definirmos os limites, temos que separar o usuário ROOT em um grupo especial, assim como todos os usuários que tenham perfil de administrador.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;groupadd adm&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;gpasswd -a root adm&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Editando os limites dos usuários:&lt;br /&gt;
&lt;code&gt;vim /etc/security/limits.conf&lt;/code&gt;&lt;br /&gt;
É possível verificar as opções a serem alteras no arquivo. O arquivo é todo comentado.&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/limits-conf.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h1 id=&quot;expiracao-de-senhas&quot;&gt;Expiração de Senhas&lt;/h1&gt;
&lt;p&gt;O arquivo &lt;code&gt;/etc/login.defs&lt;/code&gt; controla as opções de senha e mais algumas coisas que são configuradas no momento da criação do usuário.
No exemplo abaixo vamos configurar o tempo máximo de uma senha e quanto tempo antes da senha do usuário expirar o sistema vai avisar.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;vim /etc/login.defs&lt;/span&gt;
     &lt;span class=&quot;l-Scalar-Plain&quot;&gt;PASS_MAX_DAYS 60&lt;/span&gt;
     &lt;span class=&quot;l-Scalar-Plain&quot;&gt;PASS_MIN_DAYS 0&lt;/span&gt;
     &lt;span class=&quot;l-Scalar-Plain&quot;&gt;PASS_WARN_AGE 10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

  
  &lt;p&gt;&lt;a href=&quot;http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte2/&quot;&gt;Segurança em servidores Linux - Parte 2&lt;/a&gt; was originally published by Lailson Henrique at &lt;a href=&quot;http://lailson.github.io&quot;&gt;Lailson Henrique&lt;/a&gt; on September 13, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Segurança em servidores Linux - Parte 1]]></title>
  <link rel="alternate" type="text/html" href="http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte1/"/>
  <id>http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte1</id>
  <updated>2014-09-13T00:00:00-00:00</updated>
  <published>2014-09-13T00:00:00-03:00</published>
  
  <author>
    <name>Lailson Henrique</name>
    <uri>http://lailson.github.io</uri>
    <email>lailson.pi@gmail.com</email>
  </author>
  <category scheme="http://lailson.github.io/tags/#seguran%C3%A7a%20linux%20antivirus%20boot%20grub%20log%20kaspersky%20clamav%20mysql%20pati%C3%A7%C3%B5es" term="segurança linux antivirus boot grub log kaspersky clamav mysql patições" />
  <content type="html">
  
    &lt;p&gt;Hoje, o cenário da segurança digital não é um dos melhores. Sendo a informação o principal ativo de uma empresa, esta passa a ser bastante requisitada. A empresa &lt;a href=&quot;http://imprima.com&quot;&gt;imprima&lt;/a&gt; mostrou uma imagem dos 20 paies que mais sofrem com ataques digitais. 
Tomar medidas para aumentar a segurança do seu servidor linux é primordial nos dias de hoje. Veremos aqui algumas delas:&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/20countries.jpg&quot; /&gt;
 &lt;/figure&gt;

&lt;h1 id=&quot;instalando-antivirus&quot;&gt;Instalando antivirus&lt;/h1&gt;

&lt;h2 id=&quot;clamav&quot;&gt;ClamAV&lt;/h2&gt;
&lt;p&gt;Instalando o ClamAV&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;apt-get install clamav&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;apt-get install arc bzip2 cabextract p7zip unzip unrar-free&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;/etc/init.d/clamav-freshclam status&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;O EICAR test file(arquivo de teste, em português) é um arquivo de 68 bytes que possui uma linha de caracteres, desenvolvido pelo European Institute of Computer Anti-Virus Research (Instituto Europeu para Pesquisa de Antivírus de Computador), é usado para testar a eficiência dos antivírus na detecção de vírus conhecidos sem qualquer risco ao computador. Usar o EICAR ao invés de um vírus real para testar um antivírus, é a garantia de que o computador não será infectado.
Baixar o &lt;a href=&quot;http://www.eicar.org/&quot;&gt;Eicar&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;wget http://www.eicar.org/download/eicar.com&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Testando o ClamAv:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;clamscan eicar.com&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Testando o ClamAV&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/clamscan_eicar.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h2 id=&quot;kaspersky&quot;&gt;Kaspersky&lt;/h2&gt;
&lt;p&gt;Efetuar o download do pacote no site &lt;a href=&quot;http://kaspersky.com/&quot;&gt;kaspersky.com&lt;/a&gt;:
Baixando e intalando o pacote mais atual (8.0.2):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;wget http://products.kaspersky-labs.com/products/multilanguage/file_servers/kavlinuxserver8.0/linux/kav4fs_8.0.2-172_i386.deb&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;dpkg -i kav4fs_8.0.2-172_i386.deb&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;/opt/kaspersky/kav4fs/bin/kav4fs-setup.pl&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;O processo de configuração do Kaspersky irá iniciar.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Configuração do proxy, caso exista: N&lt;/li&gt;
  &lt;li&gt;Download da última base de dados (atualização): yes&lt;/li&gt;
  &lt;li&gt;Agendar atualização: N&lt;/li&gt;
  &lt;li&gt;Proteção do kernel em tempo real: yes&lt;/li&gt;
  &lt;li&gt;Proteção do SAMBA: yes&lt;/li&gt;
  &lt;li&gt;locale: pt_BR.utf8&lt;/li&gt;
  &lt;li&gt;diretório do arquivo da licença trial: &lt;/li&gt;
  &lt;li&gt;senha : Yes &lt;em&gt;**&lt;/em&gt;
Ao final abra seu navegador e digite http://SEU_IP:9080&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/kaspersky-web.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h1 id=&quot;segurana-no-gestor-de-boot-grub&quot;&gt;Segurança no gestor de boot: GRUB&lt;/h1&gt;

&lt;p&gt;Instalando o pbkdf2&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;grub-mkpasswd-pbkdf2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/pbkdf2.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Edite o arquivo /etc/grub.d/40_custom e adiciona a senha ao final do arquivo.&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/40_custon.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Neste arquivo foi criado o usuário &lt;code&gt;lailson&lt;/code&gt; e sua senha. Este usuário é o root, é o unico que poderar editar o grub. É possível adicionar novas usuário mas estes não poderão editar o grub.
Para efetivar a operaçao digite o comando &lt;code&gt;update-grub&lt;/code&gt; para atualizar o grub. 
Ao reiniciar o sistema verá que se solicitar a tecla de edição “e” será solicitado usuário e senha.&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/grub_senha.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h1 id=&quot;gerenciando-logs&quot;&gt;Gerenciando Logs&lt;/h1&gt;
&lt;p&gt;Os logs são responsável por registrar todas as ações no sistema em um arquivo. Podemos registrar:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Tentativas de conexão de usuários&lt;/li&gt;
  &lt;li&gt;Páginas acessadas&lt;/li&gt;
  &lt;li&gt;Registros do firewall como scanners e outros tipos de tentativas de invasão&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;O RSyslog é uma versão avançada do syslog que vamos utilizar para gerenciar os log.&lt;/p&gt;

&lt;h2 id=&quot;configuraes-do-servidor-de-log&quot;&gt;Configurações do servidor de log&lt;/h2&gt;
&lt;p&gt;Neste exemplo o servidor vai ser a maquina que irá receber os log e tem o ip=192.168.0.17. &lt;/p&gt;
&lt;p&gt;Devemos alterar o arquivo &lt;code&gt;vim /etc/rsyslog.conf&lt;/code&gt; e descomentar as linhas:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;$ModLoad imudp&lt;/span&gt; 
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;$UDPServerRun 514&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;No arquivo &lt;code&gt;vim /etc/default/rsyslog&lt;/code&gt; devemos adiconar ao final do arquivo:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;RSYSLOGD_OPTIONS=&amp;quot;-c0 -r&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Reiniciando o serviço com o comando &lt;code&gt;/etc/init.d/rsyslog restart&lt;/code&gt;. Para visualizar os logs utilizaremos o comando &lt;code&gt;tail -f /var/log/auth.log&lt;/code&gt;. 
Agora vamos configurar o cliente que irá enviar os logs para o servidor.&lt;/p&gt;

&lt;h2 id=&quot;configurando-o-cliente-de-log&quot;&gt;Configurando o cliente de log&lt;/h2&gt;
&lt;p&gt;Vamos alterar o arquivo de hosts do cliente.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;192.168.0.17     lailson&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Agora vamos alterar o arquivo de configuração `vim /etc/rsyslog.conf`&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;.*       @lailson&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Adicionando isso ao final do arquivo podmos reiniciar o serviço `/etc/init.d/rsyslog restart`. Pronto! Se logarmos novamente no cliente o log de  &lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/seguranca_linux/logs.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt; Podemos ver na figura acima um terminal onde o lado esquerdo mostra a tela do servidor e o lado direito mostra a tela do cliente. Podemos ver que no lado direito foi feito autenticação de usuário e isso foi registrado no servidor (lado direito).&lt;/p&gt;

&lt;h2 id=&quot;gravando-os-logs-no-mysql&quot;&gt;Gravando os logs no MySQL&lt;/h2&gt;
&lt;p&gt;No servidor de log:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;apt-get install rsyslog-mysql mysql-server&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;mysql -p&lt;/span&gt;
    &lt;span class=&quot;l-Scalar-Plain&quot;&gt;mysql&amp;gt; grant ALL ON Syslog.* to rsyslog@localhost identified by &amp;#39;secret&amp;#39;;&lt;/span&gt;
    &lt;span class=&quot;l-Scalar-Plain&quot;&gt;mysql&amp;gt; flush privileges;&lt;/span&gt;
&lt;span class=&quot;l-Scalar-Plain&quot;&gt;vim /etc/rsyslog.d/mysql.conf&lt;/span&gt;
    &lt;span class=&quot;l-Scalar-Plain&quot;&gt;$ModLoad ommysql&lt;/span&gt;
    &lt;span class=&quot;l-Scalar-Plain&quot;&gt;*.* :ommysql:localhost,Syslog,rsyslog,secret&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Todos os logs estão sendo gravados no banco de dados mysql. Podemos entrar no mysql `mysql -p` e na tabela syslog `use Syslog` podemos ver todos os logs: `select * from SystemEvents`&lt;/p&gt;

&lt;h1 id=&quot;configurando-parties&quot;&gt;Configurando Partições&lt;/h1&gt;
&lt;p&gt;Para todas as partições montadas em um servidor, é importante verificar as opções que estão disponíveis, pois estas podem ser uma porta de entrada para intrusos.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nosuid&lt;/code&gt; – Irá ignorar o bit SUID em um arquivo, fazendo com que ele se comporte como um executável convencional.&lt;br /&gt;
&lt;code&gt;noexec&lt;/code&gt; - Não permite a execução de arquivos nesta partição.&lt;br /&gt;
&lt;code&gt;nodev&lt;/code&gt;  - Não permite a utilização de arquivos de dispositivos nesta partição.&lt;br /&gt;
&lt;code&gt;/tmp&lt;/code&gt;   – Deve ter a opção noexec.&lt;br /&gt;
&lt;code&gt;/usr&lt;/code&gt;   - Pode ser montado como apenas leitura. Lembre que em alguns servidores a mudança de arquivos é feita em momentos muito específicos.&lt;br /&gt;
&lt;code&gt;/var &lt;/code&gt;  - É possível utilizarmos o noexec nesta partição.&lt;br /&gt;
Alterações no &lt;code&gt;/etc/fstab&lt;/code&gt;&lt;/p&gt;


  
  &lt;p&gt;&lt;a href=&quot;http://lailson.github.io/articles/Seguranca-em-servidor-Linux-Parte1/&quot;&gt;Segurança em servidores Linux - Parte 1&lt;/a&gt; was originally published by Lailson Henrique at &lt;a href=&quot;http://lailson.github.io&quot;&gt;Lailson Henrique&lt;/a&gt; on September 13, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Análise de Malware - PARTE1]]></title>
  <link rel="alternate" type="text/html" href="http://lailson.github.io/articles/Analise-de-Malware-Parte1/"/>
  <id>http://lailson.github.io/articles/Analise-de-Malware-Parte1</id>
  <updated>2014-06-14T00:00:00-00:00</updated>
  <published>2014-06-14T00:00:00-03:00</published>
  
  <author>
    <name>Lailson Henrique</name>
    <uri>http://lailson.github.io</uri>
    <email>lailson.pi@gmail.com</email>
  </author>
  <category scheme="http://lailson.github.io/tags/#malware%20analise%20estatica%20dinamica%20linux%20wireshark%20botnet%20rxbot" term="malware analise estatica dinamica linux wireshark botnet rxbot" />
  <content type="html">
  
    &lt;p&gt;Este post mostra uma introdução à Análise de Malware mostrando passo-a-passo como devemos analisar de forma estática e dinâmica um malware. 
A análise &lt;/p&gt;

&lt;h1 id=&quot;analisando-malware&quot;&gt;Analisando Malware&lt;/h1&gt;

&lt;h2 id=&quot;anlise-na-web&quot;&gt;Análise na web&lt;/h2&gt;
&lt;p&gt;Inicialmente vamos submentar o nosso artefato a um site para ser avalisado por diersos antivirus. O site é &lt;a href=&quot;http://virustotal.com&quot;&gt;www.virustotal.com&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/virustotal.png&quot; /&gt;
 &lt;/figure&gt;

&lt;p&gt;Nesse caso o malware submetido pof analisado por 54 antivirus no qual 40 deles detectaram que este realmente é um malware.&lt;/p&gt;

&lt;h2 id=&quot;ambiente-virtual&quot;&gt;Ambiente Virtual&lt;/h2&gt;
&lt;p&gt;Nessa prática vamos utilizar o &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;Virtual Box&lt;/a&gt; que é uma ferramentar para virtualizar ambientes, assim podemos simular (virtualizar) uma máquina windows xp e uma máquina linux (REMnux). 
Como vamos manipular um malware devemos tomar certos cuidados, para isso vamos criar uma rede host-only para que haja conexão apenas entre a máquina windows XP e Linux. 
Para faciliar segue o &lt;a href=&quot;https://mega.co.nz/#!rsJx0LRK!a6whtxW014bzH2kDyv03an1hyhqvkwVXyOqBV84pJ5o&quot;&gt;link da máquina xp&lt;/a&gt; no formato .ova e do &lt;a href=&quot;http://sourceforge.net/projects/remnux/files/version5/remnux-5.0-live-cd.iso/download&quot;&gt; linux no formato iso e &lt;a href=&quot;http://sourceforge.net/projects/remnux/files/version5/remnux-5.0-ova-public.ova/download&quot;&gt;no formato ova&lt;/a&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/Virtualbox.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h2 id=&quot;anlise-esttica---cdigo&quot;&gt;Análise Estática - Código&lt;/h2&gt;
&lt;p&gt;Vamos analisar o código utilizando um programa bintext &lt;a href=&quot;http://b2b-download.mcafee.com/products/tools/foundstone/bintext303.zip&quot;&gt;link&lt;/a&gt; que é possível “ler” um código mesmo depois que o arquivo é compilado.&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/bintext.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Como mostra a figura a cima o código está ofuscado. Essa é uma técnica usada pelos malwares para tentar esconder seu código, para isso é utilizado programas conhecidos como packer. Pare tentar desofuscar o código iremos utilizao o UPX &lt;a href=&quot;http://sourceforge.net/projects/upx/&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/upx.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Figura: upx &lt;/p&gt;

&lt;h2 id=&quot;anlise-dinmica---comportamental&quot;&gt;Análise Dinâmica - Comportamental&lt;/h2&gt;
&lt;p&gt;Utilizaremos o wireshark para verificar os pacotes que trafegam na rede. O wireshark é um snifer (bisbilhoteiro) que capture o tráfego da rede para análise.
Neste caso usaremos a versão do Remnux que ja vem com o wireshark instalado, mas primiero devemos criar uma rede host-only.
Para execute o wireshark pelo remnux utiliza-se o comando &lt;code&gt;sudo wireshark&lt;/code&gt; e a senha do root é &lt;code&gt;malware&lt;/code&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/wireshark.png&quot; /&gt;
 &lt;/figure&gt;

&lt;h3 id=&quot;hosts&quot;&gt;Hosts&lt;/h3&gt;
&lt;p&gt;Na nossa experiência percebemos através do wireshark que nosso malware tenta se conectar com o servidor lailsonhenrique.com então vamos alterar o arquivo hosts para que o windowsxp pense que nossa máquina linux é o servidor lailsonhenrique.com
&lt;code&gt;C:\windows\system32\drivers\etc\hosts&lt;/code&gt;&lt;/p&gt;
&lt;figure&gt;
 	&lt;img src=&quot;/images/analisemalware/hosts.png&quot; /&gt;
 &lt;/figure&gt;
&lt;p&gt;Figura: Aterando arquivo Hosts&lt;/p&gt;

&lt;h2 id=&quot;irc&quot;&gt;IRC&lt;/h2&gt;
&lt;p&gt;O malware tenta se conectar a um servidor irc, sendo assim vamos utilizar o Remnux para estartar um servidor irc utilizando o comando &lt;code&gt;ircd start&lt;/code&gt; depois vamos entrar no canal &lt;code&gt;#malware&lt;/code&gt; e vamos perceber que o virus estar conectado a este canal, então vamos digitar alguns comandos para interagir com o malware
É necessário se autenticar para se comunicar com o malware para isso vamos digitar &lt;code&gt;.login aula&lt;/code&gt; onde aula é a senha.&lt;/p&gt;

&lt;h1 id=&quot;vdeo&quot;&gt;Vídeo&lt;/h1&gt;
&lt;p&gt;Veja todo o processo no vídeo a baixo&lt;/p&gt;

&lt;p&gt;link: https://www.youtube.com/watch?v=8MEjb4N5kTM&lt;/p&gt;

&lt;p&gt;Video:&lt;/p&gt;

&lt;embed width=&quot;420&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/v/8MEjb4N5kTM&quot; /&gt;


  
  &lt;p&gt;&lt;a href=&quot;http://lailson.github.io/articles/Analise-de-Malware-Parte1/&quot;&gt;Análise de Malware - PARTE1&lt;/a&gt; was originally published by Lailson Henrique at &lt;a href=&quot;http://lailson.github.io&quot;&gt;Lailson Henrique&lt;/a&gt; on June 14, 2014.&lt;/p&gt;</content>
</entry>

</feed>
